<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ì›°ì›¨ì´ë¸Œ WORKSPACE</title>
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }
    body {
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
      background: #f0f2f5;
      color: #333;
      min-height: 100vh;
    }

    /* ì‚¬ì´ë“œë°” */
    .sidebar {
      position: fixed;
      left: 0;
      top: 0;
      width: 240px;
      height: 100vh;
      background: linear-gradient(180deg, #1a1f36 0%, #252d4a 100%);
      padding: 20px 0;
      z-index: 100;
    }
    .logo {
      padding: 0 20px 30px;
      border-bottom: 1px solid rgba(255,255,255,0.1);
      margin-bottom: 20px;
    }
    .logo h1 {
      color: #fff;
      font-size: 20px;
      display: flex;
      align-items: center;
      gap: 10px;
    }
    .logo span { font-size: 24px; }
    .nav-menu { list-style: none; }
    .nav-item {
      padding: 14px 20px;
      color: rgba(255,255,255,0.7);
      cursor: pointer;
      display: flex;
      align-items: center;
      gap: 12px;
      transition: all 0.2s;
      border-left: 3px solid transparent;
    }
    .nav-item:hover {
      background: rgba(255,255,255,0.05);
      color: #fff;
    }
    .nav-item.active {
      background: rgba(102, 126, 234, 0.2);
      color: #fff;
      border-left-color: #667eea;
    }
    .nav-item i { font-size: 18px; width: 24px; text-align: center; }

    /* ë©”ì¸ ì»¨í…ì¸  */
    .main-content {
      margin-left: 240px;
      padding: 24px;
      min-height: 100vh;
    }

    .page-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 24px;
    }
    .page-header h2 {
      font-size: 24px;
      color: #1a1f36;
    }

    /* ì¹´ë“œ */
    .card {
      background: white;
      border-radius: 12px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      margin-bottom: 24px;
    }
    .card-header {
      padding: 20px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .card-header h3 { font-size: 16px; color: #333; }
    .card-body { padding: 20px; }

    /* í†µê³„ ê·¸ë¦¬ë“œ */
    .stats-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 20px;
      margin-bottom: 24px;
    }
    .stat-card {
      background: white;
      border-radius: 12px;
      padding: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
      display: flex;
      align-items: center;
      gap: 16px;
    }
    .stat-icon {
      width: 56px;
      height: 56px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }
    .stat-icon.blue { background: #e3f2fd; }
    .stat-icon.green { background: #e8f5e9; }
    .stat-icon.purple { background: #f3e5f5; }
    .stat-icon.orange { background: #fff3e0; }
    .stat-info h4 { font-size: 13px; color: #666; margin-bottom: 4px; }
    .stat-info .value { font-size: 28px; font-weight: 700; color: #1a1f36; }
    .stat-info .sub { font-size: 12px; color: #999; margin-top: 4px; }

    /* í¼ */
    .form-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
    }
    .form-group { display: flex; flex-direction: column; gap: 6px; }
    .form-group label { font-size: 13px; font-weight: 500; color: #666; }
    .form-group input, .form-group select, .form-group textarea {
      padding: 10px 14px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      transition: all 0.2s;
    }
    .form-group input:focus, .form-group select:focus, .form-group textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
    }
    .form-group.full { grid-column: 1 / -1; }

    /* ì²´í¬ë°•ìŠ¤ ê·¸ë£¹ */
    .checkbox-group {
      display: flex;
      flex-wrap: wrap;
      gap: 10px;
    }
    .checkbox-label {
      display: flex;
      align-items: center;
      gap: 6px;
      padding: 6px 12px;
      background: #f5f5f5;
      border-radius: 6px;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s;
    }
    .checkbox-label:hover { background: #eeeeee; }
    .checkbox-label input:checked + span { color: #667eea; font-weight: 500; }
    .checkbox-label input { display: none; }

    /* ë²„íŠ¼ */
    .btn {
      padding: 10px 20px;
      border: none;
      border-radius: 8px;
      font-size: 14px;
      font-weight: 500;
      cursor: pointer;
      transition: all 0.2s;
      display: inline-flex;
      align-items: center;
      gap: 8px;
    }
    .btn-primary {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      color: white;
    }
    .btn-primary:hover {
      transform: translateY(-1px);
      box-shadow: 0 4px 12px rgba(102, 126, 234, 0.4);
    }
    .btn-secondary { background: #f0f0f0; color: #333; }
    .btn-danger { background: #ff4757; color: white; }
    .btn-sm { padding: 6px 12px; font-size: 12px; }
    .btn-group { display: flex; gap: 8px; margin-top: 20px; }

    /* í…Œì´ë¸” */
    table { width: 100%; border-collapse: collapse; }
    th, td { padding: 14px 16px; text-align: left; }
    th {
      background: #fafafa;
      font-weight: 600;
      font-size: 12px;
      color: #666;
      text-transform: uppercase;
    }
    tr { border-bottom: 1px solid #f0f0f0; }
    tr:hover { background: #fafbff; }
    td { font-size: 14px; }

    .badge {
      display: inline-block;
      padding: 4px 10px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      margin: 2px;
    }
    .badge-yellow { background: #fff8e1; color: #f57c00; }
    .badge-green { background: #e8f5e9; color: #388e3c; }
    .badge-blue { background: #e3f2fd; color: #1976d2; }
    .badge-gray { background: #f5f5f5; color: #616161; }
    .badge-red { background: #ffebee; color: #d32f2f; }
    .badge-purple { background: #f3e5f5; color: #7b1fa2; }
    .badge-pink { background: #fce4ec; color: #c2185b; }
    .badge-orange { background: #fff3e0; color: #e65100; }
    .badge-brown { background: #efebe9; color: #5d4037; }
    .badge-default { background: #eceff1; color: #546e7a; }

    .actions { display: flex; gap: 6px; }

    /* ëª¨ë‹¬ */
    .modal {
      display: none;
      position: fixed;
      top: 0; left: 0; right: 0; bottom: 0;
      background: rgba(0,0,0,0.5);
      justify-content: center;
      align-items: center;
      z-index: 1000;
    }
    .modal.active { display: flex; }
    .modal-content {
      background: white;
      border-radius: 16px;
      width: 90%;
      max-width: 700px;
      max-height: 90vh;
      overflow-y: auto;
    }
    .modal-header {
      padding: 20px;
      border-bottom: 1px solid #f0f0f0;
      display: flex;
      justify-content: space-between;
      align-items: center;
    }
    .modal-header h3 { font-size: 18px; }
    .modal-close {
      background: none;
      border: none;
      font-size: 24px;
      cursor: pointer;
      color: #999;
    }
    .modal-body { padding: 20px; }

    /* ì°¨íŠ¸ ê·¸ë¦¬ë“œ */
    .charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 20px;
    }

    /* ë¡œë”© & ë¹ˆ ìƒíƒœ */
    .loading, .empty-state {
      text-align: center;
      padding: 60px 20px;
      color: #999;
    }
    .empty-state h4 { color: #666; margin-bottom: 8px; }

    /* í˜ì´ì§€ */
    .page { display: none; }
    .page.active { display: block; }

    /* ìˆ«ì í¬ë§· */
    .number { font-family: 'Roboto Mono', monospace; }

    /* ë“±ê¸‰ ìŠ¤íƒ€ì¼ */
    .grade-A { color: #d32f2f; font-weight: bold; }
    .grade-B { color: #f57c00; font-weight: bold; }
    .grade-C { color: #388e3c; font-weight: bold; }
    .grade-D { color: #757575; font-weight: bold; }

    /* ìº í˜ì¸ ìƒì„¸ í˜ì´ì§€ ìŠ¤íƒ€ì¼ */
    .campaign-header-card {
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      border-radius: 16px;
      padding: 24px;
      margin-bottom: 24px;
      color: white;
    }
    .campaign-header-card .campaign-title {
      font-size: 28px;
      font-weight: 700;
      margin-bottom: 16px;
    }
    .campaign-header-card .campaign-meta {
      display: flex;
      flex-wrap: wrap;
      gap: 24px;
    }
    .campaign-header-card .meta-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .campaign-header-card .meta-label {
      font-size: 12px;
      opacity: 0.8;
    }
    .campaign-header-card .meta-value {
      font-size: 16px;
      font-weight: 600;
    }

    /* ìº í˜ì¸ ê´€ë¦¬ ì •ë³´ ì¹´ë“œ */
    .info-card {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    .info-card h4 {
      font-size: 12px;
      color: #999;
      margin-bottom: 8px;
      text-transform: uppercase;
    }
    .info-card .value {
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }
    .info-card .value.highlight {
      color: #667eea;
    }

    /* ì¼ë³„ ì°¨íŠ¸ ê·¸ë¦¬ë“œ */
    .daily-charts-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
      gap: 20px;
    }
    .chart-container {
      background: #fafafa;
      border-radius: 12px;
      padding: 16px;
    }
    .chart-container h5 {
      font-size: 14px;
      color: #333;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .chart-container canvas {
      max-height: 200px;
    }

    /* í´ë¦­ ê°€ëŠ¥í•œ í…Œì´ë¸” í–‰ */
    tr.clickable {
      cursor: pointer;
      transition: background-color 0.2s;
    }
    tr.clickable:hover {
      background: #f0f4ff !important;
    }

    /* ë¸Œëœë“œ ì •ë³´ ì„¹ì…˜ */
    .brand-info-section {
      background: #f8f9fa;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
    }
    .brand-info-section h4 {
      font-size: 14px;
      color: #666;
      margin-bottom: 16px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .brand-info-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
      gap: 16px;
    }
    .brand-info-item {
      display: flex;
      flex-direction: column;
      gap: 4px;
    }
    .brand-info-item .label {
      font-size: 11px;
      color: #999;
      text-transform: uppercase;
    }
    .brand-info-item .value {
      font-size: 15px;
      font-weight: 500;
      color: #333;
    }

    /* í•„í„° ì„¹ì…˜ */
    .filter-section {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    .filter-row {
      display: flex;
      flex-wrap: wrap;
      gap: 16px;
      align-items: flex-end;
    }
    .filter-group {
      display: flex;
      flex-direction: column;
      gap: 6px;
    }
    .filter-group label {
      font-size: 12px;
      font-weight: 500;
      color: #666;
    }
    .filter-group select,
    .filter-group input {
      padding: 8px 12px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      font-size: 14px;
      min-width: 140px;
    }
    .filter-group select:focus,
    .filter-group input:focus {
      outline: none;
      border-color: #667eea;
    }
    .filter-buttons {
      display: flex;
      gap: 8px;
    }
    .period-buttons {
      display: flex;
      gap: 8px;
    }
    .period-btn {
      padding: 8px 16px;
      border: 1px solid #e0e0e0;
      border-radius: 8px;
      background: white;
      cursor: pointer;
      font-size: 13px;
      transition: all 0.2s;
    }
    .period-btn:hover {
      border-color: #667eea;
      color: #667eea;
    }
    .period-btn.active {
      background: #667eea;
      color: white;
      border-color: #667eea;
    }

    /* í™•ì¥ëœ í†µê³„ ì¹´ë“œ */
    .stats-grid-extended {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }
    .stat-card-extended {
      background: white;
      border-radius: 12px;
      padding: 20px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    .stat-card-extended .stat-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 12px;
    }
    .stat-card-extended .stat-label {
      font-size: 13px;
      color: #666;
    }
    .stat-card-extended .stat-icon-sm {
      font-size: 20px;
    }
    .stat-card-extended .stat-value {
      font-size: 28px;
      font-weight: 700;
      color: #1a1f36;
      margin-bottom: 8px;
    }
    .stat-card-extended .stat-change {
      font-size: 12px;
      display: flex;
      align-items: center;
      gap: 4px;
    }
    .stat-change.positive { color: #4caf50; }
    .stat-change.negative { color: #f44336; }

    /* ì¶”ì´ ì°¨íŠ¸ ì„¹ì…˜ */
    .trend-section {
      background: white;
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.06);
    }
    .trend-section .section-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 20px;
    }
    .trend-section .section-title {
      font-size: 18px;
      font-weight: 600;
      color: #333;
    }
    .trend-charts-wrapper {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(400px, 1fr));
      gap: 20px;
    }
    .trend-chart-box {
      background: #fafafa;
      border-radius: 12px;
      padding: 16px;
    }
    .trend-chart-box h4 {
      font-size: 14px;
      color: #333;
      margin-bottom: 12px;
    }

    /* íƒ­ ë„¤ë¹„ê²Œì´ì…˜ */
    .tab-nav {
      display: flex;
      gap: 0;
      border-bottom: 2px solid #f0f0f0;
      margin-bottom: 24px;
    }
    .tab-btn {
      padding: 12px 24px;
      border: none;
      background: none;
      font-size: 14px;
      font-weight: 500;
      color: #666;
      cursor: pointer;
      position: relative;
      transition: all 0.2s;
    }
    .tab-btn:hover {
      color: #667eea;
    }
    .tab-btn.active {
      color: #667eea;
    }
    .tab-btn.active::after {
      content: '';
      position: absolute;
      bottom: -2px;
      left: 0;
      right: 0;
      height: 2px;
      background: #667eea;
    }
    .tab-content {
      display: none;
    }
    .tab-content.active {
      display: block;
    }

    /* ì¸ì‚¬ì´íŠ¸ ì˜ì—­ */
    .insight-box {
      background: linear-gradient(135deg, #f8f9ff 0%, #f0f4ff 100%);
      border-radius: 12px;
      padding: 20px;
      margin-bottom: 24px;
      border-left: 4px solid #667eea;
    }
    .insight-box h4 {
      font-size: 14px;
      color: #667eea;
      margin-bottom: 12px;
      display: flex;
      align-items: center;
      gap: 8px;
    }
    .insight-box p {
      font-size: 14px;
      color: #333;
      line-height: 1.6;
    }
  </style>
</head>
<body>
  <!-- ì‚¬ì´ë“œë°” -->
  <nav class="sidebar">
    <div class="logo">
      <h1><span>ğŸŒŠ</span> ì›°ì›¨ì´ë¸Œ</h1>
    </div>
    <ul class="nav-menu">
      <li class="nav-item active" data-page="dashboard">
        <span>ğŸ“Š</span> ëŒ€ì‹œë³´ë“œ
      </li>
      <li class="nav-item" data-page="brands">
        <span>ğŸ¢</span> ë¸Œëœë“œ ê´€ë¦¬
      </li>
      <li class="nav-item" data-page="influencers">
        <span>ğŸ‘¤</span> ì¸í”Œë£¨ì–¸ì„œ ê´€ë¦¬
      </li>
      <li class="nav-item" data-page="campaigns">
        <span>ğŸ¯</span> ìº í˜ì¸ ê´€ë¦¬
      </li>
    </ul>
  </nav>

  <!-- ë©”ì¸ ì»¨í…ì¸  -->
  <main class="main-content">
    <!-- ëŒ€ì‹œë³´ë“œ -->
    <div id="dashboard" class="page active">
      <div class="page-header">
        <h2>ëŒ€ì‹œë³´ë“œ</h2>
        <button class="btn btn-primary" onclick="loadDashboard()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
      </div>

      <!-- í•„í„° ì„¹ì…˜ -->
      <div class="filter-section">
        <div class="filter-row">
          <div class="filter-group">
            <label>ê¸°ê°„</label>
            <div class="period-buttons">
              <button class="period-btn active" data-period="7">ìµœê·¼ 7ì¼</button>
              <button class="period-btn" data-period="30">ì´ë²ˆ ë‹¬</button>
              <button class="period-btn" data-period="last-month">ì§€ë‚œ ë‹¬</button>
              <button class="period-btn" data-period="custom">ì§ì ‘ ì„ íƒ</button>
            </div>
          </div>
          <div class="filter-group" id="customDateRange" style="display: none;">
            <label>ì‹œì‘ì¼</label>
            <input type="date" id="filterStartDate">
          </div>
          <div class="filter-group" id="customDateRangeEnd" style="display: none;">
            <label>ì¢…ë£Œì¼</label>
            <input type="date" id="filterEndDate">
          </div>
          <div class="filter-group">
            <label>ë¸Œëœë“œ</label>
            <select id="filterBrand">
              <option value="">ì „ì²´ ë¸Œëœë“œ</option>
            </select>
          </div>
          <div class="filter-group">
            <label>ìº í˜ì¸</label>
            <select id="filterCampaign">
              <option value="">ì „ì²´ ìº í˜ì¸</option>
            </select>
          </div>
          <div class="filter-buttons">
            <button class="btn btn-primary btn-sm" onclick="applyFilters()">ì ìš©</button>
            <button class="btn btn-secondary btn-sm" onclick="resetFilters()">ì´ˆê¸°í™”</button>
          </div>
        </div>
      </div>

      <!-- íƒ­ ë„¤ë¹„ê²Œì´ì…˜ -->
      <div class="tab-nav">
        <button class="tab-btn active" data-tab="overview">ê°œìš”</button>
        <button class="tab-btn" data-tab="trends">ì¼ë³„ ì¶”ì´</button>
        <button class="tab-btn" data-tab="monthly">ì›”ê°„ ì„±ê³¼</button>
        <button class="tab-btn" data-tab="brands">ë¸Œëœë“œë³„ ì„±ê³¼</button>
      </div>

      <!-- ê°œìš” íƒ­ -->
      <div id="tab-overview" class="tab-content active">
        <!-- í•µì‹¬ ì§€í‘œ ìš”ì•½ ì¹´ë“œ -->
        <div class="stats-grid-extended" id="performanceStats">
          <div class="loading">í†µê³„ ë¡œë”© ì¤‘...</div>
        </div>

        <!-- ì¸ì‚¬ì´íŠ¸ ì˜ì—­ -->
        <div class="insight-box" id="weeklyInsight">
          <h4>ğŸ’¡ ì£¼ê°„ ì¸ì‚¬ì´íŠ¸</h4>
          <p id="insightText">ë°ì´í„°ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ì¤‘...</p>
        </div>

        <!-- ê¸°ì¡´ í†µê³„ ê·¸ë¦¬ë“œ -->
        <div class="stats-grid" id="statsGrid">
          <div class="loading">í†µê³„ ë¡œë”© ì¤‘...</div>
        </div>

        <div class="charts-grid" id="chartsGrid"></div>
      </div>

      <!-- ì¼ë³„ ì¶”ì´ íƒ­ -->
      <div id="tab-trends" class="tab-content">
        <div class="trend-section">
          <div class="section-header">
            <h3 class="section-title">ğŸ“ˆ ìµœê·¼ 7ì¼ ì„±ê³¼ ì¶”ì´</h3>
          </div>
          <div class="trend-charts-wrapper" id="trendChartsWrapper">
            <div class="loading">ì°¨íŠ¸ ë¡œë”© ì¤‘...</div>
          </div>
        </div>
      </div>

      <!-- ì›”ê°„ ì„±ê³¼ íƒ­ -->
      <div id="tab-monthly" class="tab-content">
        <div class="card">
          <div class="card-header">
            <h3>ğŸ“… ì›”ê°„ ì„±ê³¼ ë¦¬í¬íŠ¸</h3>
            <div class="filter-group" style="flex-direction: row; gap: 8px;">
              <select id="monthlyYear">
                <option value="2025">2025ë…„</option>
                <option value="2024">2024ë…„</option>
              </select>
              <select id="monthlyMonth">
                <option value="1">1ì›”</option>
                <option value="2">2ì›”</option>
                <option value="3">3ì›”</option>
                <option value="4">4ì›”</option>
                <option value="5">5ì›”</option>
                <option value="6">6ì›”</option>
                <option value="7">7ì›”</option>
                <option value="8">8ì›”</option>
                <option value="9">9ì›”</option>
                <option value="10">10ì›”</option>
                <option value="11">11ì›”</option>
                <option value="12">12ì›”</option>
              </select>
              <button class="btn btn-primary btn-sm" onclick="loadMonthlyReport()">ì¡°íšŒ</button>
            </div>
          </div>
          <div class="card-body">
            <div class="stats-grid-extended" id="monthlyStats">
              <div class="loading">ì›”ê°„ ë°ì´í„° ë¡œë”© ì¤‘...</div>
            </div>
          </div>
        </div>
      </div>

      <!-- ë¸Œëœë“œë³„ ì„±ê³¼ íƒ­ -->
      <div id="tab-brands" class="tab-content">
        <div class="card">
          <div class="card-header">
            <h3>ğŸ¢ ë¸Œëœë“œë³„ ì„±ê³¼ í˜„í™©</h3>
          </div>
          <div class="card-body">
            <div id="brandPerformanceTable">
              <div class="loading">ë¸Œëœë“œ ì„±ê³¼ ë¡œë”© ì¤‘...</div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- ë¸Œëœë“œ ê´€ë¦¬ -->
    <div id="brands" class="page">
      <div class="page-header">
        <h2>ë¸Œëœë“œ ê´€ë¦¬</h2>
        <button class="btn btn-primary" onclick="openBrandModal()">+ ë¸Œëœë“œ ì¶”ê°€</button>
      </div>

      <div class="card">
        <div class="card-header">
          <h3>ë¸Œëœë“œ ëª©ë¡</h3>
          <button class="btn btn-secondary btn-sm" onclick="loadBrands()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
        </div>
        <div class="card-body">
          <div id="brandsTable"><div class="loading">ë¡œë”© ì¤‘...</div></div>
        </div>
      </div>
    </div>

    <!-- ì¸í”Œë£¨ì–¸ì„œ ê´€ë¦¬ -->
    <div id="influencers" class="page">
      <div class="page-header">
        <h2>ì¸í”Œë£¨ì–¸ì„œ ê´€ë¦¬</h2>
        <button class="btn btn-primary" onclick="openInfluencerModal()">+ ì¸í”Œë£¨ì–¸ì„œ ì¶”ê°€</button>
      </div>

      <div class="card">
        <div class="card-header">
          <h3>ì¸í”Œë£¨ì–¸ì„œ ëª©ë¡</h3>
          <button class="btn btn-secondary btn-sm" onclick="loadInfluencers()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
        </div>
        <div class="card-body">
          <div id="influencersTable"><div class="loading">ë¡œë”© ì¤‘...</div></div>
        </div>
      </div>
    </div>

    <!-- ìº í˜ì¸ ê´€ë¦¬ -->
    <div id="campaigns" class="page">
      <div class="page-header">
        <h2>ìº í˜ì¸ ê´€ë¦¬</h2>
        <button class="btn btn-primary" onclick="openCampaignModal()">+ ìº í˜ì¸ ì¶”ê°€</button>
      </div>

      <div class="card">
        <div class="card-header">
          <h3>ìº í˜ì¸ ëª©ë¡</h3>
          <button class="btn btn-secondary btn-sm" onclick="loadCampaigns()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
        </div>
        <div class="card-body">
          <div id="campaignsTable"><div class="loading">ë¡œë”© ì¤‘...</div></div>
        </div>
      </div>
    </div>

    <!-- ìº í˜ì¸ ìƒì„¸ ëŒ€ì‹œë³´ë“œ -->
    <div id="campaignDetail" class="page">
      <div class="page-header">
        <div style="display: flex; align-items: center; gap: 16px;">
          <button class="btn btn-secondary" onclick="backToCampaigns()">â† ë’¤ë¡œ</button>
          <h2 id="campaignDetailTitle">ìº í˜ì¸ ìƒì„¸</h2>
        </div>
        <button class="btn btn-primary" onclick="refreshCampaignDetail()">ğŸ”„ ìƒˆë¡œê³ ì¹¨</button>
      </div>

      <!-- ìº í˜ì¸ ê¸°ë³¸ ì •ë³´ -->
      <div class="campaign-header-card" id="campaignHeaderInfo">
        <div class="loading">ë¡œë”© ì¤‘...</div>
      </div>

      <!-- ìº í˜ì¸ ê´€ë¦¬ ì •ë³´ -->
      <div class="stats-grid" id="campaignManageInfo">
      </div>

      <!-- ì„±ê³¼ í†µê³„ -->
      <div class="card" style="margin-bottom: 24px;">
        <div class="card-header">
          <h3>ìº í˜ì¸ ì„±ê³¼ í†µê³„</h3>
        </div>
        <div class="card-body">
          <div class="stats-grid" id="campaignPerformanceStats">
            <div class="loading">ë¡œë”© ì¤‘...</div>
          </div>
        </div>
      </div>

      <!-- í¬ë¦¬ì—ì´í„°/ì½˜í…ì¸  ë¦¬ìŠ¤íŠ¸ -->
      <div class="card" style="margin-bottom: 24px;">
        <div class="card-header">
          <h3>ğŸ‘¥ ì°¸ì—¬ í¬ë¦¬ì—ì´í„°</h3>
          <span id="creatorCount" class="badge badge-blue">0ëª…</span>
        </div>
        <div class="card-body">
          <div id="creatorsTable">
            <div class="loading">ë¡œë”© ì¤‘...</div>
          </div>
        </div>
      </div>

      <!-- ì¼ë³„ ì¸ì‚¬ì´íŠ¸ ì°¨íŠ¸ -->
      <div class="card">
        <div class="card-header">
          <h3>Daily Insight</h3>
        </div>
        <div class="card-body">
          <div class="daily-charts-grid" id="dailyInsightCharts">
            <div class="loading">ë¡œë”© ì¤‘...</div>
          </div>
        </div>
      </div>
    </div>
  </main>

  <!-- ë¸Œëœë“œ ëª¨ë‹¬ -->
  <div id="brandModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="brandModalTitle">ë¸Œëœë“œ ì¶”ê°€</h3>
        <button class="modal-close" onclick="closeModal('brandModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="brandForm">
          <input type="hidden" name="id">
          <div class="form-grid">
            <div class="form-group">
              <label>ë¸Œëœë“œëª… *</label>
              <input type="text" name="ë¸Œëœë“œëª…" required>
            </div>
            <div class="form-group">
              <label>ë¸Œëœë“œ ë‹´ë‹¹ì</label>
              <input type="text" name="ë¸Œëœë“œë‹´ë‹¹ì">
            </div>
            <div class="form-group">
              <label>ì „í™”ë²ˆí˜¸</label>
              <input type="tel" name="ì „í™”ë²ˆí˜¸" placeholder="010-0000-0000">
            </div>
            <div class="form-group">
              <label>ì´ë©”ì¼</label>
              <input type="email" name="ì´ë©”ì¼">
            </div>
            <div class="form-group">
              <label>ìƒíƒœ</label>
              <select name="ìƒíƒœ" id="brandStatus"></select>
            </div>
            <div class="form-group">
              <label>ì—…ì¢…</label>
              <select name="ì—…ì¢…" id="brandIndustry"></select>
            </div>
            <div class="form-group">
              <label>ìœ ì…ê²½ë¡œ</label>
              <select name="ìœ ì…ê²½ë¡œ" id="brandChannel"></select>
            </div>
            <div class="form-group full">
              <label>ê³„ì¢Œ ì •ë³´</label>
              <input type="text" name="ê³„ì¢Œì •ë³´" placeholder="ì€í–‰ëª… ê³„ì¢Œë²ˆí˜¸ ì˜ˆê¸ˆì£¼">
            </div>
          </div>
          <div class="btn-group">
            <button type="submit" class="btn btn-primary">ì €ì¥</button>
            <button type="button" class="btn btn-secondary" onclick="closeModal('brandModal')">ì·¨ì†Œ</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ì¸í”Œë£¨ì–¸ì„œ ëª¨ë‹¬ -->
  <div id="influencerModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="influencerModalTitle">ì¸í”Œë£¨ì–¸ì„œ ì¶”ê°€</h3>
        <button class="modal-close" onclick="closeModal('influencerModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="influencerForm">
          <input type="hidden" name="id">
          <div class="form-grid">
            <div class="form-group">
              <label>ì´ë¦„ *</label>
              <input type="text" name="ì´ë¦„" required>
            </div>
            <div class="form-group">
              <label>ì—°ë½ì²˜</label>
              <input type="tel" name="ì—°ë½ì²˜">
            </div>
            <div class="form-group">
              <label>ì´ë©”ì¼</label>
              <input type="email" name="ì´ë©”ì¼">
            </div>
            <div class="form-group">
              <label>íŒ”ë¡œì›Œ ìˆ˜</label>
              <input type="number" name="íŒ”ë¡œì›Œìˆ˜" placeholder="10000">
            </div>
            <div class="form-group full">
              <label>ì¸ìŠ¤íƒ€ê·¸ë¨ í”„ë¡œí•„</label>
              <input type="text" name="ì¸ìŠ¤íƒ€ê·¸ë¨" placeholder="@username ë˜ëŠ” í”„ë¡œí•„ URL">
            </div>
            <div class="form-group">
              <label>ìƒíƒœ</label>
              <select name="ìƒíƒœ" id="influencerStatus"></select>
            </div>
            <div class="form-group">
              <label>í¬ë¦¬ì—ì´í„° ìœ í˜•</label>
              <select name="í¬ë¦¬ì—ì´í„°ìœ í˜•" id="influencerCreatorType"></select>
            </div>
            <div class="form-group full">
              <label>í™œë™ ë¶„ì•¼</label>
              <div class="checkbox-group" id="influencerCategoryCheckboxes"></div>
            </div>
            <div class="form-group full">
              <label>ì œì‘ ê°€ëŠ¥í•œ ì½˜í…ì¸  ìœ í˜•</label>
              <div class="checkbox-group" id="influencerContentTypeCheckboxes"></div>
            </div>
            <div class="form-group full">
              <label>í¬ë§ ë³´ìƒ</label>
              <div class="checkbox-group" id="influencerRewardCheckboxes"></div>
            </div>
          </div>
          <div class="btn-group">
            <button type="submit" class="btn btn-primary">ì €ì¥</button>
            <button type="button" class="btn btn-secondary" onclick="closeModal('influencerModal')">ì·¨ì†Œ</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <!-- ìº í˜ì¸ ëª¨ë‹¬ -->
  <div id="campaignModal" class="modal">
    <div class="modal-content">
      <div class="modal-header">
        <h3 id="campaignModalTitle">ìº í˜ì¸ ì¶”ê°€</h3>
        <button class="modal-close" onclick="closeModal('campaignModal')">&times;</button>
      </div>
      <div class="modal-body">
        <form id="campaignForm">
          <input type="hidden" name="id">
          <div class="form-grid">
            <div class="form-group">
              <label>ìº í˜ì¸ëª… *</label>
              <input type="text" name="ìº í˜ì¸ëª…" required>
            </div>
            <div class="form-group">
              <label>ìƒíƒœ</label>
              <select name="ìƒíƒœ" id="campaignStatus"></select>
            </div>
            <div class="form-group">
              <label>ìº í˜ì¸ ìœ í˜•</label>
              <select name="ìº í˜ì¸ìœ í˜•" id="campaignType"></select>
            </div>
            <div class="form-group">
              <label>ì¹´í…Œê³ ë¦¬</label>
              <select name="ì¹´í…Œê³ ë¦¬" id="campaignCategory"></select>
            </div>
            <div class="form-group">
              <label>ìº í˜ì¸ ì‹œì‘ì¼</label>
              <input type="date" name="ì‹œì‘ì¼">
            </div>
            <div class="form-group">
              <label>ìº í˜ì¸ ì¢…ë£Œì¼</label>
              <input type="date" name="ì¢…ë£Œì¼">
            </div>
            <div class="form-group">
              <label>ì˜ˆì‚° (ë§Œì›)</label>
              <input type="number" name="ì˜ˆì‚°" placeholder="100">
            </div>
            <div class="form-group">
              <label>ëª©í‘œ ì¸ì›</label>
              <input type="number" name="ëª©í‘œì¸ì›" placeholder="10">
            </div>
            <div class="form-group">
              <label>ë¦¬ë°‹</label>
              <input type="number" name="ë¦¬ë°‹" placeholder="10">
            </div>
            <div class="form-group">
              <label>ë§¨ì…˜ ID</label>
              <input type="text" name="ë§¨ì…˜ID" placeholder="@brand_mention">
            </div>
            <div class="form-group">
              <label>ë¸Œëœë“œ ê³„ì • URL</label>
              <input type="url" name="ë¸Œëœë“œê³„ì •" placeholder="https://instagram.com/...">
            </div>
            <div class="form-group">
              <label>ì œíœ´ ë§í¬</label>
              <input type="url" name="ì œíœ´ë§í¬" placeholder="https://...">
            </div>
            <div class="form-group full">
              <label>í˜‘ì°¬ ì œí’ˆ</label>
              <div class="checkbox-group" id="campaignProductCheckboxes"></div>
            </div>
            <div class="form-group full">
              <label>ë©”ëª¨</label>
              <textarea name="ë©”ëª¨" rows="3"></textarea>
            </div>
          </div>
          <div class="btn-group">
            <button type="submit" class="btn btn-primary">ì €ì¥</button>
            <button type="button" class="btn btn-secondary" onclick="closeModal('campaignModal')">ì·¨ì†Œ</button>
          </div>
        </form>
      </div>
    </div>
  </div>

  <script>
    const API = '/api';
    let formOptions = null;
    let currentFilters = {
      period: '7',
      startDate: null,
      endDate: null,
      brandId: '',
      campaignId: ''
    };
    let trendCharts = {};
    let brandsData = [];
    let campaignsData = [];

    // ì˜µì…˜ ë¡œë“œ
    async function loadOptions() {
      try {
        const res = await fetch(`${API}/options`);
        formOptions = await res.json();
        populateFormOptions();
        await loadFilterOptions();
      } catch (err) {
        console.error('ì˜µì…˜ ë¡œë“œ ì‹¤íŒ¨:', err);
      }
    }

    // í•„í„° ì˜µì…˜ ë¡œë“œ
    async function loadFilterOptions() {
      try {
        const [brandsRes, campaignsRes] = await Promise.all([
          fetch(`${API}/brands`),
          fetch(`${API}/campaigns`)
        ]);
        brandsData = await brandsRes.json();
        campaignsData = await campaignsRes.json();

        const brandSelect = document.getElementById('filterBrand');
        brandSelect.innerHTML = '<option value="">ì „ì²´ ë¸Œëœë“œ</option>' +
          brandsData.map(b => `<option value="${b.id}">${b.ë¸Œëœë“œëª…}</option>`).join('');

        const campaignSelect = document.getElementById('filterCampaign');
        campaignSelect.innerHTML = '<option value="">ì „ì²´ ìº í˜ì¸</option>' +
          campaignsData.map(c => `<option value="${c.id}">${c.ìº í˜ì¸ëª…}</option>`).join('');
      } catch (err) {
        console.error('í•„í„° ì˜µì…˜ ë¡œë“œ ì‹¤íŒ¨:', err);
      }
    }

    // ê¸°ê°„ ë²„íŠ¼ ì´ë²¤íŠ¸
    document.querySelectorAll('.period-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        currentFilters.period = btn.dataset.period;

        const customStart = document.getElementById('customDateRange');
        const customEnd = document.getElementById('customDateRangeEnd');
        if (btn.dataset.period === 'custom') {
          customStart.style.display = 'flex';
          customEnd.style.display = 'flex';
        } else {
          customStart.style.display = 'none';
          customEnd.style.display = 'none';
        }
      });
    });

    // íƒ­ ì´ë²¤íŠ¸
    document.querySelectorAll('.tab-btn').forEach(btn => {
      btn.addEventListener('click', () => {
        document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(c => c.classList.remove('active'));
        btn.classList.add('active');
        const tabId = `tab-${btn.dataset.tab}`;
        document.getElementById(tabId).classList.add('active');

        // íƒ­ë³„ ë°ì´í„° ë¡œë“œ
        if (btn.dataset.tab === 'trends') loadDailyTrends();
        if (btn.dataset.tab === 'monthly') loadMonthlyReport();
        if (btn.dataset.tab === 'brands') loadBrandPerformance();
      });
    });

    // í•„í„° ì ìš©
    function applyFilters() {
      currentFilters.brandId = document.getElementById('filterBrand').value;
      currentFilters.campaignId = document.getElementById('filterCampaign').value;
      if (currentFilters.period === 'custom') {
        currentFilters.startDate = document.getElementById('filterStartDate').value;
        currentFilters.endDate = document.getElementById('filterEndDate').value;
      }
      loadDashboard();
    }

    // í•„í„° ì´ˆê¸°í™”
    function resetFilters() {
      currentFilters = { period: '7', startDate: null, endDate: null, brandId: '', campaignId: '' };
      document.querySelectorAll('.period-btn').forEach(b => b.classList.remove('active'));
      document.querySelector('.period-btn[data-period="7"]').classList.add('active');
      document.getElementById('filterBrand').value = '';
      document.getElementById('filterCampaign').value = '';
      document.getElementById('customDateRange').style.display = 'none';
      document.getElementById('customDateRangeEnd').style.display = 'none';
      loadDashboard();
    }

    // ë‚ ì§œ ê³„ì‚° í—¬í¼
    function getDateRange(period) {
      const today = new Date();
      let startDate, endDate = today.toISOString().split('T')[0];

      switch (period) {
        case '7':
          startDate = new Date(today.setDate(today.getDate() - 7)).toISOString().split('T')[0];
          break;
        case '30':
          startDate = new Date(today.getFullYear(), today.getMonth(), 1).toISOString().split('T')[0];
          break;
        case 'last-month':
          const lastMonth = new Date(today.getFullYear(), today.getMonth() - 1, 1);
          startDate = lastMonth.toISOString().split('T')[0];
          endDate = new Date(today.getFullYear(), today.getMonth(), 0).toISOString().split('T')[0];
          break;
        default:
          startDate = currentFilters.startDate;
          endDate = currentFilters.endDate;
      }
      return { startDate, endDate };
    }

    function populateFormOptions() {
      if (!formOptions) return;

      // ë¸Œëœë“œ ì˜µì…˜
      populateSelect('brandStatus', formOptions.brands.ìƒíƒœ, true);
      populateSelect('brandIndustry', formOptions.brands.ì—…ì¢…);
      populateSelect('brandChannel', formOptions.brands.ìœ ì…ê²½ë¡œ);

      // ì¸í”Œë£¨ì–¸ì„œ ì˜µì…˜
      populateSelect('influencerStatus', formOptions.influencers.ìƒíƒœ, true);
      populateSelect('influencerCreatorType', formOptions.influencers.í¬ë¦¬ì—ì´í„°ìœ í˜•);
      populateCheckboxes('influencerCategoryCheckboxes', formOptions.influencers.í™œë™ë¶„ì•¼, 'í™œë™ë¶„ì•¼');
      populateCheckboxes('influencerContentTypeCheckboxes', formOptions.influencers.ì½˜í…ì¸ ìœ í˜•, 'ì½˜í…ì¸ ìœ í˜•');
      populateCheckboxes('influencerRewardCheckboxes', formOptions.influencers.í¬ë§ë³´ìƒ, 'í¬ë§ë³´ìƒ');

      // ìº í˜ì¸ ì˜µì…˜
      populateSelect('campaignStatus', formOptions.campaigns.ìƒíƒœ, true);
      populateSelect('campaignType', formOptions.campaigns.ìº í˜ì¸ìœ í˜•);
      populateSelect('campaignCategory', formOptions.campaigns.ì¹´í…Œê³ ë¦¬);
      populateCheckboxes('campaignProductCheckboxes', formOptions.campaigns.í˜‘ì°¬ì œí’ˆ, 'í˜‘ì°¬ì œí’ˆ');
    }

    function populateSelect(elementId, options, isStatus = false) {
      const select = document.getElementById(elementId);
      if (!select) return;

      select.innerHTML = '<option value="">ì„ íƒ</option>';
      options.forEach(opt => {
        const option = document.createElement('option');
        option.value = opt.name;
        option.textContent = opt.name;
        select.appendChild(option);
      });
    }

    function populateCheckboxes(containerId, options, fieldName) {
      const container = document.getElementById(containerId);
      if (!container) return;

      container.innerHTML = options.map(opt => `
        <label class="checkbox-label">
          <input type="checkbox" name="${fieldName}" value="${opt.name}">
          <span>${opt.name}</span>
        </label>
      `).join('');
    }

    // í˜ì´ì§€ ë„¤ë¹„ê²Œì´ì…˜
    document.querySelectorAll('.nav-item').forEach(item => {
      item.addEventListener('click', () => {
        document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
        document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
        item.classList.add('active');
        const pageId = item.dataset.page;
        document.getElementById(pageId).classList.add('active');

        if (pageId === 'dashboard') loadDashboard();
        if (pageId === 'brands') loadBrands();
        if (pageId === 'influencers') loadInfluencers();
        if (pageId === 'campaigns') loadCampaigns();
      });
    });

    // ìˆ«ì í¬ë§·
    function formatNumber(num) {
      return new Intl.NumberFormat('ko-KR').format(num);
    }

    function formatCurrency(num) {
      return num ? `${formatNumber(num)}ë§Œì›` : '0ì›';
    }

    // ===================== ëŒ€ì‹œë³´ë“œ =====================
    async function loadDashboard() {
      const statsGrid = document.getElementById('statsGrid');
      const chartsGrid = document.getElementById('chartsGrid');
      const performanceStats = document.getElementById('performanceStats');
      const insightText = document.getElementById('insightText');

      try {
        // í•„í„° íŒŒë¼ë¯¸í„° êµ¬ì„±
        const { startDate, endDate } = getDateRange(currentFilters.period);
        const params = new URLSearchParams();
        if (startDate) params.append('startDate', startDate);
        if (endDate) params.append('endDate', endDate);
        if (currentFilters.brandId) params.append('brandId', currentFilters.brandId);
        if (currentFilters.campaignId) params.append('campaignId', currentFilters.campaignId);

        const [dashboardRes, dailyRes] = await Promise.all([
          fetch(`${API}/dashboard?${params}`),
          fetch(`${API}/stats/daily?days=7&campaignId=${currentFilters.campaignId || ''}`)
        ]);

        const data = await dashboardRes.json();
        const dailyData = await dailyRes.json();

        // í•µì‹¬ ì„±ê³¼ ì§€í‘œ ì¹´ë“œ (ìƒˆë¡œìš´ í™•ì¥ ì¹´ë“œ)
        const summary = dailyData.summary || {};
        performanceStats.innerHTML = `
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì´ ë…¸ì¶œìˆ˜</span>
              <span class="stat-icon-sm">ğŸ‘ï¸</span>
            </div>
            <div class="stat-value number">${formatNumber(summary.impressions || 0)}</div>
            <div class="stat-change ${summary.impressionsChange >= 0 ? 'positive' : 'negative'}">
              ${summary.impressionsChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(summary.impressionsChange || 0).toFixed(1)}% ì „ì£¼ ëŒ€ë¹„
            </div>
          </div>
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì´ ì¢‹ì•„ìš”</span>
              <span class="stat-icon-sm">â¤ï¸</span>
            </div>
            <div class="stat-value number">${formatNumber(summary.likes || 0)}</div>
            <div class="stat-change ${summary.likesChange >= 0 ? 'positive' : 'negative'}">
              ${summary.likesChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(summary.likesChange || 0).toFixed(1)}% ì „ì£¼ ëŒ€ë¹„
            </div>
          </div>
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì´ ëŒ“ê¸€</span>
              <span class="stat-icon-sm">ğŸ’¬</span>
            </div>
            <div class="stat-value number">${formatNumber(summary.comments || 0)}</div>
            <div class="stat-change ${summary.commentsChange >= 0 ? 'positive' : 'negative'}">
              ${summary.commentsChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(summary.commentsChange || 0).toFixed(1)}% ì „ì£¼ ëŒ€ë¹„
            </div>
          </div>
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì´ ê³µìœ </span>
              <span class="stat-icon-sm">ğŸ”„</span>
            </div>
            <div class="stat-value number">${formatNumber(summary.shares || 0)}</div>
            <div class="stat-change ${summary.sharesChange >= 0 ? 'positive' : 'negative'}">
              ${summary.sharesChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(summary.sharesChange || 0).toFixed(1)}% ì „ì£¼ ëŒ€ë¹„
            </div>
          </div>
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì´ ë„ë‹¬</span>
              <span class="stat-icon-sm">ğŸ“Š</span>
            </div>
            <div class="stat-value number">${formatNumber(summary.reach || 0)}</div>
            <div class="stat-change ${summary.reachChange >= 0 ? 'positive' : 'negative'}">
              ${summary.reachChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(summary.reachChange || 0).toFixed(1)}% ì „ì£¼ ëŒ€ë¹„
            </div>
          </div>
        `;

        // ì¸ì‚¬ì´íŠ¸ í…ìŠ¤íŠ¸ ì—…ë°ì´íŠ¸
        const bestMetric = getBestPerformingMetric(summary);
        insightText.textContent = bestMetric
          ? `ì´ë²ˆ ì£¼ ${bestMetric.name}ì´(ê°€) ì „ì£¼ ëŒ€ë¹„ ${bestMetric.change.toFixed(1)}% ìƒìŠ¹í–ˆìŠµë‹ˆë‹¤. í˜„ì¬ ì§„í–‰ ì¤‘ì¸ ìº í˜ì¸ ${data.campaigns.byStatus['ì§„í–‰ì¤‘'] || 0}ê°œ ì¤‘ ì„±ê³¼ê°€ ì¢‹ì€ ìº í˜ì¸ì„ í™•ì¸í•´ë³´ì„¸ìš”.`
          : `í˜„ì¬ ${data.campaigns.total}ê°œì˜ ìº í˜ì¸ì´ ë“±ë¡ë˜ì–´ ìˆìœ¼ë©°, ${data.campaigns.byStatus['ì§„í–‰ì¤‘'] || 0}ê°œê°€ ì§„í–‰ ì¤‘ì…ë‹ˆë‹¤.`;

        // ê¸°ì¡´ í†µê³„ ê·¸ë¦¬ë“œ
        statsGrid.innerHTML = `
          <div class="stat-card">
            <div class="stat-icon blue">ğŸ¢</div>
            <div class="stat-info">
              <h4>ì „ì²´ ë¸Œëœë“œ</h4>
              <div class="value">${data.brands.total}</div>
              <div class="sub">ê³„ì•½ ì™„ë£Œ: ${data.brands.byStatus['ê³„ì•½ ì™„ë£Œ'] || 0}</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon green">ğŸ‘¤</div>
            <div class="stat-info">
              <h4>ì¸í”Œë£¨ì–¸ì„œ</h4>
              <div class="value">${data.influencers.total}</div>
              <div class="sub">ì´ íŒ”ë¡œì›Œ: ${formatNumber(data.influencers.totalFollowers)}</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon purple">ğŸ¯</div>
            <div class="stat-info">
              <h4>ìº í˜ì¸</h4>
              <div class="value">${data.campaigns.total}</div>
              <div class="sub">ì§„í–‰ì¤‘: ${data.campaigns.byStatus['ì§„í–‰ì¤‘'] || 0}</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon orange">ğŸ’°</div>
            <div class="stat-info">
              <h4>ì´ ì˜ˆì‚°</h4>
              <div class="value number">${formatCurrency(data.campaigns.totalBudget)}</div>
              <div class="sub">ì´ ì°¸ì—¬: ${data.campaigns.totalParticipants}ëª…</div>
            </div>
          </div>
        `;

        chartsGrid.innerHTML = `
          <div class="card">
            <div class="card-header"><h3>ë¸Œëœë“œ ìƒíƒœë³„</h3></div>
            <div class="card-body"><canvas id="brandStatusChart"></canvas></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>ì¸í”Œë£¨ì–¸ì„œ í™œë™ë¶„ì•¼ë³„</h3></div>
            <div class="card-body"><canvas id="influencerCategoryChart"></canvas></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>ìº í˜ì¸ ìƒíƒœë³„</h3></div>
            <div class="card-body"><canvas id="campaignStatusChart"></canvas></div>
          </div>
          <div class="card">
            <div class="card-header"><h3>ìº í˜ì¸ ìœ í˜•ë³„</h3></div>
            <div class="card-body"><canvas id="campaignTypeChart"></canvas></div>
          </div>
        `;

        createChart('brandStatusChart', data.brands.byStatus, ['#9e9e9e', '#4caf50', '#2196f3', '#f44336']);
        createChart('influencerCategoryChart', data.influencers.byCategory, ['#4caf50', '#ff9800', '#9c27b0', '#e91e63', '#607d8b', '#795548', '#f44336', '#2196f3', '#ffc107', '#00bcd4']);
        createChart('campaignStatusChart', data.campaigns.byStatus, ['#9e9e9e', '#4caf50', '#f44336']);
        createChart('campaignTypeChart', data.campaigns.byType, ['#9e9e9e', '#ff9800', '#ffc107']);

      } catch (err) {
        statsGrid.innerHTML = `<div class="empty-state"><h4>ë¡œë“œ ì‹¤íŒ¨</h4><p>${err.message}</p></div>`;
      }
    }

    function getBestPerformingMetric(summary) {
      const metrics = [
        { name: 'ì¢‹ì•„ìš”', change: summary.likesChange || 0 },
        { name: 'ëŒ“ê¸€', change: summary.commentsChange || 0 },
        { name: 'ê³µìœ ', change: summary.sharesChange || 0 },
        { name: 'ë„ë‹¬', change: summary.reachChange || 0 },
        { name: 'ë…¸ì¶œ', change: summary.impressionsChange || 0 }
      ];
      return metrics.filter(m => m.change > 0).sort((a, b) => b.change - a.change)[0];
    }

    function createChart(id, data, colors) {
      const ctx = document.getElementById(id);
      if (!ctx || Object.keys(data).length === 0) return;

      new Chart(ctx, {
        type: 'doughnut',
        data: {
          labels: Object.keys(data),
          datasets: [{
            data: Object.values(data),
            backgroundColor: colors,
            borderWidth: 0
          }]
        },
        options: {
          responsive: true,
          plugins: { legend: { position: 'bottom' } }
        }
      });
    }

    // ===================== ì¼ë³„ ì¶”ì´ =====================
    async function loadDailyTrends() {
      const wrapper = document.getElementById('trendChartsWrapper');
      wrapper.innerHTML = '<div class="loading">ì°¨íŠ¸ ë¡œë”© ì¤‘...</div>';

      try {
        const res = await fetch(`${API}/stats/daily?days=7&campaignId=${currentFilters.campaignId || ''}`);
        const data = await res.json();
        const dailyData = data.dailyData || [];

        if (dailyData.length === 0) {
          wrapper.innerHTML = '<div class="empty-state">ì¼ë³„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
          return;
        }

        // ê¸°ì¡´ ì°¨íŠ¸ ì •ë¦¬
        Object.values(trendCharts).forEach(chart => chart.destroy());
        trendCharts = {};

        const labels = dailyData.map(d => d.date);
        const trendConfigs = [
          { key: 'likes', label: 'ì¢‹ì•„ìš”', color: '#fa709a', icon: 'â¤ï¸' },
          { key: 'comments', label: 'ëŒ“ê¸€', color: '#fee140', icon: 'ğŸ’¬' },
          { key: 'shares', label: 'ê³µìœ ', color: '#a8edea', icon: 'ğŸ”„' },
          { key: 'mentions', label: 'ë§¨ì…˜ í”¼ë“œ', color: '#667eea', icon: 'ğŸ“¢' },
          { key: 'videoPlays', label: 'ë¹„ë””ì˜¤ ì¬ìƒ', color: '#4facfe', icon: 'â–¶ï¸' },
          { key: 'reach', label: 'ë„ë‹¬', color: '#43e97b', icon: 'ğŸ“Š' }
        ];

        wrapper.innerHTML = trendConfigs.map((cfg, idx) => `
          <div class="trend-chart-box">
            <h4>${cfg.icon} ${cfg.label}</h4>
            <canvas id="trendChart_${idx}"></canvas>
          </div>
        `).join('');

        trendConfigs.forEach((cfg, idx) => {
          const ctx = document.getElementById(`trendChart_${idx}`);
          const chartData = dailyData.map(d => d[cfg.key] || 0);

          trendCharts[cfg.key] = new Chart(ctx, {
            type: 'line',
            data: {
              labels: labels,
              datasets: [{
                label: cfg.label,
                data: chartData,
                borderColor: cfg.color,
                backgroundColor: cfg.color + '20',
                fill: true,
                tension: 0.4,
                pointRadius: 4,
                pointHoverRadius: 6
              }]
            },
            options: {
              responsive: true,
              maintainAspectRatio: true,
              plugins: { legend: { display: false } },
              scales: {
                x: { grid: { display: false } },
                y: { beginAtZero: true, grid: { color: '#f0f0f0' } }
              }
            }
          });
        });
      } catch (err) {
        wrapper.innerHTML = `<div class="empty-state"><h4>ë¡œë“œ ì‹¤íŒ¨</h4><p>${err.message}</p></div>`;
      }
    }

    // ===================== ì›”ê°„ ì„±ê³¼ =====================
    async function loadMonthlyReport() {
      const container = document.getElementById('monthlyStats');
      container.innerHTML = '<div class="loading">ì›”ê°„ ë°ì´í„° ë¡œë”© ì¤‘...</div>';

      try {
        const year = document.getElementById('monthlyYear').value;
        const month = document.getElementById('monthlyMonth').value;
        const res = await fetch(`${API}/stats/monthly?year=${year}&month=${month}`);
        const response = await res.json();
        const current = response.current || {};
        const comparison = response.comparison || {};

        container.innerHTML = `
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì›”ê°„ ì´ ìº í˜ì¸</span>
              <span class="stat-icon-sm">ğŸ¯</span>
            </div>
            <div class="stat-value number">${current.totalCampaigns || 0}</div>
            <div class="stat-change positive">
              ${current.campaigns?.length || 0}ê°œ í™œì„± ìº í˜ì¸
            </div>
          </div>
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì›”ê°„ ì´ ì¢‹ì•„ìš”</span>
              <span class="stat-icon-sm">â¤ï¸</span>
            </div>
            <div class="stat-value number">${formatNumber(current.totalLikes || 0)}</div>
            <div class="stat-change ${comparison.likesChange >= 0 ? 'positive' : 'negative'}">
              ${comparison.likesChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(comparison.likesChange || 0).toFixed(1)}% ì „ì›” ëŒ€ë¹„
            </div>
          </div>
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì›”ê°„ ì´ ëŒ“ê¸€</span>
              <span class="stat-icon-sm">ğŸ’¬</span>
            </div>
            <div class="stat-value number">${formatNumber(current.totalComments || 0)}</div>
            <div class="stat-change ${comparison.commentsChange >= 0 ? 'positive' : 'negative'}">
              ${comparison.commentsChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(comparison.commentsChange || 0).toFixed(1)}% ì „ì›” ëŒ€ë¹„
            </div>
          </div>
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì›”ê°„ ì´ ê³µìœ </span>
              <span class="stat-icon-sm">ğŸ”„</span>
            </div>
            <div class="stat-value number">${formatNumber(current.totalShares || 0)}</div>
            <div class="stat-change ${comparison.sharesChange >= 0 ? 'positive' : 'negative'}">
              ${comparison.sharesChange >= 0 ? 'â–²' : 'â–¼'} ${Math.abs(comparison.sharesChange || 0).toFixed(1)}% ì „ì›” ëŒ€ë¹„
            </div>
          </div>
          <div class="stat-card-extended">
            <div class="stat-header">
              <span class="stat-label">ì´ ì°¸ì—¬ ì¸ì›</span>
              <span class="stat-icon-sm">ğŸ‘¥</span>
            </div>
            <div class="stat-value number">${current.totalParticipants || 0}ëª…</div>
            <div class="stat-change positive">
              ${year}ë…„ ${month}ì›” ê¸°ì¤€
            </div>
          </div>
        `;
      } catch (err) {
        container.innerHTML = `<div class="empty-state"><h4>ë¡œë“œ ì‹¤íŒ¨</h4><p>${err.message}</p></div>`;
      }
    }

    // ===================== ë¸Œëœë“œë³„ ì„±ê³¼ =====================
    async function loadBrandPerformance() {
      const container = document.getElementById('brandPerformanceTable');
      container.innerHTML = '<div class="loading">ë¸Œëœë“œ ì„±ê³¼ ë¡œë”© ì¤‘...</div>';

      try {
        const res = await fetch(`${API}/stats/brands`);
        const response = await res.json();
        const data = response.brands || [];

        if (!data || data.length === 0) {
          container.innerHTML = '<div class="empty-state"><h4>ë¸Œëœë“œ ì„±ê³¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</h4></div>';
          return;
        }

        // ì´ ì¸ê²Œì´ì§€ë¨¼íŠ¸ ê¸°ì¤€ìœ¼ë¡œ ì •ë ¬
        const sortedData = data.sort((a, b) => (b.ì´ì¸ê²Œì´ì§€ë¨¼íŠ¸ || 0) - (a.ì´ì¸ê²Œì´ì§€ë¨¼íŠ¸ || 0));

        container.innerHTML = `
          <table>
            <thead>
              <tr>
                <th>ìˆœìœ„</th>
                <th>ë¸Œëœë“œëª…</th>
                <th>ìƒíƒœ</th>
                <th>ìº í˜ì¸ ìˆ˜</th>
                <th>ì´ ì¢‹ì•„ìš”</th>
                <th>ì´ ëŒ“ê¸€</th>
                <th>ì´ ê³µìœ </th>
                <th>ì´ ì¸ê²Œì´ì§€ë¨¼íŠ¸</th>
              </tr>
            </thead>
            <tbody>
              ${sortedData.map((item, idx) => `
                <tr>
                  <td><strong>${idx + 1}</strong></td>
                  <td><strong>${item.ë¸Œëœë“œëª…}</strong></td>
                  <td><span class="badge ${getBrandStatusBadge(item.ìƒíƒœ)}">${item.ìƒíƒœ || '-'}</span></td>
                  <td class="number">${item.ìº í˜ì¸ìˆ˜ || 0}</td>
                  <td class="number">${formatNumber(item.ì´ì¢‹ì•„ìš”ìˆ˜ || 0)}</td>
                  <td class="number">${formatNumber(item.ì´ëŒ“ê¸€ìˆ˜ || 0)}</td>
                  <td class="number">${formatNumber(item.ì´ê³µìœ ìˆ˜ || 0)}</td>
                  <td class="number"><strong>${formatNumber(item.ì´ì¸ê²Œì´ì§€ë¨¼íŠ¸ || 0)}</strong></td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        `;
      } catch (err) {
        container.innerHTML = `<div class="empty-state"><h4>ë¡œë“œ ì‹¤íŒ¨</h4><p>${err.message}</p></div>`;
      }
    }

    // ===================== ë¸Œëœë“œ =====================
    async function loadBrands() {
      const container = document.getElementById('brandsTable');
      container.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';

      try {
        const res = await fetch(`${API}/brands`);
        const data = await res.json();

        if (data.length === 0) {
          container.innerHTML = '<div class="empty-state"><h4>ë“±ë¡ëœ ë¸Œëœë“œê°€ ì—†ìŠµë‹ˆë‹¤</h4></div>';
          return;
        }

        container.innerHTML = `
          <table>
            <thead>
              <tr>
                <th>ë¸Œëœë“œëª…</th>
                <th>ë‹´ë‹¹ì</th>
                <th>ì—°ë½ì²˜</th>
                <th>ì´ë©”ì¼</th>
                <th>ì—…ì¢…</th>
                <th>ìƒíƒœ</th>
                <th>ì‘ì—…</th>
              </tr>
            </thead>
            <tbody>
              ${data.map(item => `
                <tr>
                  <td><strong>${item.ë¸Œëœë“œëª…}</strong></td>
                  <td>${item.ë¸Œëœë“œë‹´ë‹¹ì || '-'}</td>
                  <td>${item.ì „í™”ë²ˆí˜¸ || '-'}</td>
                  <td>${item.ì´ë©”ì¼ || '-'}</td>
                  <td>${item.ì—…ì¢… ? `<span class="badge badge-default">${item.ì—…ì¢…}</span>` : '-'}</td>
                  <td><span class="badge ${getBrandStatusBadge(item.ìƒíƒœ)}">${item.ìƒíƒœ || '-'}</span></td>
                  <td class="actions">
                    <button class="btn btn-secondary btn-sm" onclick='editBrand(${JSON.stringify(item).replace(/'/g, "&#39;")})'>ìˆ˜ì •</button>
                    <button class="btn btn-danger btn-sm" onclick="deleteBrand('${item.id}')">ì‚­ì œ</button>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        `;
      } catch (err) {
        container.innerHTML = `<div class="empty-state"><h4>ë¡œë“œ ì‹¤íŒ¨</h4><p>${err.message}</p></div>`;
      }
    }

    function getBrandStatusBadge(status) {
      const map = { 'ì ì¬ê³ ê°': 'badge-gray', 'í˜‘ì˜ì¤‘': 'badge-green', 'ê³„ì•½ ì™„ë£Œ': 'badge-blue', 'ì¢…ë£Œ': 'badge-red' };
      return map[status] || 'badge-gray';
    }

    function openBrandModal(item = null) {
      const form = document.getElementById('brandForm');
      const title = document.getElementById('brandModalTitle');
      form.reset();

      if (item) {
        title.textContent = 'ë¸Œëœë“œ ìˆ˜ì •';
        form.elements['id'].value = item.id;
        form.elements['ë¸Œëœë“œëª…'].value = item.ë¸Œëœë“œëª… || '';
        form.elements['ë¸Œëœë“œë‹´ë‹¹ì'].value = item.ë¸Œëœë“œë‹´ë‹¹ì || '';
        form.elements['ì „í™”ë²ˆí˜¸'].value = item.ì „í™”ë²ˆí˜¸ || '';
        form.elements['ì´ë©”ì¼'].value = item.ì´ë©”ì¼ || '';
        form.elements['ìƒíƒœ'].value = item.ìƒíƒœ || '';
        form.elements['ì—…ì¢…'].value = item.ì—…ì¢… || '';
        form.elements['ìœ ì…ê²½ë¡œ'].value = item.ìœ ì…ê²½ë¡œ || '';
        form.elements['ê³„ì¢Œì •ë³´'].value = item.ê³„ì¢Œì •ë³´ || '';
      } else {
        title.textContent = 'ë¸Œëœë“œ ì¶”ê°€';
        form.elements['id'].value = '';
      }

      document.getElementById('brandModal').classList.add('active');
    }

    function editBrand(item) { openBrandModal(item); }

    document.getElementById('brandForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = Object.fromEntries(formData);
      const id = data.id;
      delete data.id;

      try {
        const url = id ? `${API}/brands/${id}` : `${API}/brands`;
        const method = id ? 'PUT' : 'POST';

        const res = await fetch(url, {
          method,
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (res.ok) {
          closeModal('brandModal');
          loadBrands();
        } else {
          const err = await res.json();
          alert('ì˜¤ë¥˜: ' + err.error);
        }
      } catch (err) {
        alert('ì €ì¥ ì‹¤íŒ¨: ' + err.message);
      }
    });

    async function deleteBrand(id) {
      if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
      try {
        await fetch(`${API}/brands/${id}`, { method: 'DELETE' });
        loadBrands();
      } catch (err) {
        alert('ì‚­ì œ ì‹¤íŒ¨: ' + err.message);
      }
    }

    // ===================== ì¸í”Œë£¨ì–¸ì„œ =====================
    async function loadInfluencers() {
      const container = document.getElementById('influencersTable');
      container.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';

      try {
        const res = await fetch(`${API}/influencers`);
        const data = await res.json();

        if (data.length === 0) {
          container.innerHTML = '<div class="empty-state"><h4>ë“±ë¡ëœ ì¸í”Œë£¨ì–¸ì„œê°€ ì—†ìŠµë‹ˆë‹¤</h4></div>';
          return;
        }

        container.innerHTML = `
          <table>
            <thead>
              <tr>
                <th>ì´ë¦„</th>
                <th>ì—°ë½ì²˜</th>
                <th>íŒ”ë¡œì›Œìˆ˜</th>
                <th>ë“±ê¸‰</th>
                <th>í™œë™ë¶„ì•¼</th>
                <th>ìƒíƒœ</th>
                <th>ì‘ì—…</th>
              </tr>
            </thead>
            <tbody>
              ${data.map(item => `
                <tr>
                  <td><strong>${item.ì´ë¦„}</strong></td>
                  <td>${item.ì—°ë½ì²˜ || '-'}</td>
                  <td class="number">${formatNumber(item.íŒ”ë¡œì›Œìˆ˜)}</td>
                  <td><span class="grade-${item.ë“±ê¸‰ || 'D'}">${item.ë“±ê¸‰ || '-'}</span></td>
                  <td>${item.í™œë™ë¶„ì•¼.map(c => `<span class="badge ${getCategoryBadge(c)}">${c}</span>`).join('') || '-'}</td>
                  <td><span class="badge ${getInfluencerStatusBadge(item.ìƒíƒœ)}">${item.ìƒíƒœ || '-'}</span></td>
                  <td class="actions">
                    <button class="btn btn-secondary btn-sm" onclick='editInfluencer(${JSON.stringify(item).replace(/'/g, "&#39;")})'>ìˆ˜ì •</button>
                    <button class="btn btn-danger btn-sm" onclick="deleteInfluencer('${item.id}')">ì‚­ì œ</button>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        `;
      } catch (err) {
        container.innerHTML = `<div class="empty-state"><h4>ë¡œë“œ ì‹¤íŒ¨</h4><p>${err.message}</p></div>`;
      }
    }

    function getCategoryBadge(cat) {
      const map = {
        'í—¬ìŠ¤': 'badge-green', 'ëŸ¬ë‹': 'badge-orange', 'ìš”ê°€': 'badge-default',
        'í•„ë¼í…ŒìŠ¤': 'badge-pink', 'ë°”ë ˆ': 'badge-gray', 'í¬ë¡œìŠ¤í•': 'badge-brown',
        'í•˜ì´ë¡ìŠ¤': 'badge-red', 'F45': 'badge-blue', 'ê¸°íƒ€': 'badge-purple',
        'í—¬ìŠ¤/ì›¨ì´íŠ¸': 'badge-yellow'
      };
      return map[cat] || 'badge-gray';
    }

    function getInfluencerStatusBadge(status) {
      const map = { 'ì ‘ìˆ˜ì™„ë£Œ': 'badge-default', 'ê²€í† ì¤‘': 'badge-green', 'ë³´ë¥˜': 'badge-yellow', 'ê±°ì ˆ': 'badge-red', 'í•©ê²©': 'badge-blue' };
      return map[status] || 'badge-gray';
    }

    function openInfluencerModal(item = null) {
      const form = document.getElementById('influencerForm');
      const title = document.getElementById('influencerModalTitle');
      form.reset();

      // ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™”
      document.querySelectorAll('#influencerCategoryCheckboxes input, #influencerContentTypeCheckboxes input, #influencerRewardCheckboxes input').forEach(cb => cb.checked = false);

      if (item) {
        title.textContent = 'ì¸í”Œë£¨ì–¸ì„œ ìˆ˜ì •';
        form.elements['id'].value = item.id;
        form.elements['ì´ë¦„'].value = item.ì´ë¦„ || '';
        form.elements['ì—°ë½ì²˜'].value = item.ì—°ë½ì²˜ || '';
        form.elements['ì´ë©”ì¼'].value = item.ì´ë©”ì¼ || '';
        form.elements['íŒ”ë¡œì›Œìˆ˜'].value = item.íŒ”ë¡œì›Œìˆ˜ || '';
        form.elements['ì¸ìŠ¤íƒ€ê·¸ë¨'].value = item.ì¸ìŠ¤íƒ€ê·¸ë¨ || '';
        form.elements['ìƒíƒœ'].value = item.ìƒíƒœ || '';
        form.elements['í¬ë¦¬ì—ì´í„°ìœ í˜•'].value = item.í¬ë¦¬ì—ì´í„°ìœ í˜• || '';

        // í™œë™ë¶„ì•¼ ì²´í¬
        (item.í™œë™ë¶„ì•¼ || []).forEach(cat => {
          const cb = document.querySelector(`#influencerCategoryCheckboxes input[value="${cat}"]`);
          if (cb) cb.checked = true;
        });

        // ì½˜í…ì¸ ìœ í˜• ì²´í¬
        (item.ì½˜í…ì¸ ìœ í˜• || []).forEach(type => {
          const cb = document.querySelector(`#influencerContentTypeCheckboxes input[value="${type}"]`);
          if (cb) cb.checked = true;
        });

        // í¬ë§ë³´ìƒ ì²´í¬
        (item.í¬ë§ë³´ìƒ || []).forEach(reward => {
          const cb = document.querySelector(`#influencerRewardCheckboxes input[value="${reward}"]`);
          if (cb) cb.checked = true;
        });
      } else {
        title.textContent = 'ì¸í”Œë£¨ì–¸ì„œ ì¶”ê°€';
        form.elements['id'].value = '';
      }

      document.getElementById('influencerModal').classList.add('active');
    }

    function editInfluencer(item) { openInfluencerModal(item); }

    document.getElementById('influencerForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = {};

      formData.forEach((value, key) => {
        if (key === 'í™œë™ë¶„ì•¼' || key === 'ì½˜í…ì¸ ìœ í˜•' || key === 'í¬ë§ë³´ìƒ') {
          if (!data[key]) data[key] = [];
          data[key].push(value);
        } else {
          data[key] = value;
        }
      });

      const id = data.id;
      delete data.id;

      try {
        const url = id ? `${API}/influencers/${id}` : `${API}/influencers`;
        const method = id ? 'PUT' : 'POST';

        const res = await fetch(url, {
          method,
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (res.ok) {
          closeModal('influencerModal');
          loadInfluencers();
        } else {
          const err = await res.json();
          alert('ì˜¤ë¥˜: ' + err.error);
        }
      } catch (err) {
        alert('ì €ì¥ ì‹¤íŒ¨: ' + err.message);
      }
    });

    async function deleteInfluencer(id) {
      if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
      try {
        await fetch(`${API}/influencers/${id}`, { method: 'DELETE' });
        loadInfluencers();
      } catch (err) {
        alert('ì‚­ì œ ì‹¤íŒ¨: ' + err.message);
      }
    }

    // ===================== ìº í˜ì¸ =====================
    async function loadCampaigns() {
      const container = document.getElementById('campaignsTable');
      container.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';

      try {
        const res = await fetch(`${API}/campaigns`);
        const data = await res.json();

        if (data.length === 0) {
          container.innerHTML = '<div class="empty-state"><h4>ë“±ë¡ëœ ìº í˜ì¸ì´ ì—†ìŠµë‹ˆë‹¤</h4></div>';
          return;
        }

        container.innerHTML = `
          <table>
            <thead>
              <tr>
                <th>ìº í˜ì¸ëª…</th>
                <th>ìœ í˜•</th>
                <th>ì¹´í…Œê³ ë¦¬</th>
                <th>ê¸°ê°„</th>
                <th>ì˜ˆì‚°</th>
                <th>ëª©í‘œ/ì°¸ì—¬</th>
                <th>ìƒíƒœ</th>
                <th>ì‘ì—…</th>
              </tr>
            </thead>
            <tbody>
              ${data.map(item => `
                <tr class="clickable" onclick="openCampaignDetail('${item.id}')">
                  <td><strong>${item.ìº í˜ì¸ëª…}</strong></td>
                  <td>${item.ìº í˜ì¸ìœ í˜• ? `<span class="badge ${getCampaignTypeBadge(item.ìº í˜ì¸ìœ í˜•)}">${item.ìº í˜ì¸ìœ í˜•}</span>` : '-'}</td>
                  <td>${item.ì¹´í…Œê³ ë¦¬ ? `<span class="badge badge-default">${item.ì¹´í…Œê³ ë¦¬}</span>` : '-'}</td>
                  <td>${item.ì‹œì‘ì¼ || '?'} ~ ${item.ì¢…ë£Œì¼ || '?'}</td>
                  <td class="number">${formatCurrency(item.ì˜ˆì‚°)}</td>
                  <td>${item.ëª©í‘œì¸ì› || 0} / ${item.ì°¸ì—¬ì¸ì› || 0}ëª…</td>
                  <td><span class="badge ${getCampaignStatusBadge(item.ìƒíƒœ)}">${item.ìƒíƒœ || '-'}</span></td>
                  <td class="actions" onclick="event.stopPropagation()">
                    <button class="btn btn-secondary btn-sm" onclick='editCampaign(${JSON.stringify(item).replace(/'/g, "&#39;")})'>ìˆ˜ì •</button>
                    <button class="btn btn-danger btn-sm" onclick="deleteCampaign('${item.id}')">ì‚­ì œ</button>
                  </td>
                </tr>
              `).join('')}
            </tbody>
          </table>
        `;
      } catch (err) {
        container.innerHTML = `<div class="empty-state"><h4>ë¡œë“œ ì‹¤íŒ¨</h4><p>${err.message}</p></div>`;
      }
    }

    function getCampaignStatusBadge(status) {
      const map = { 'ê¸°íšì¤‘': 'badge-default', 'ì§„í–‰ì¤‘': 'badge-green', 'ì¢…ë£Œ': 'badge-red' };
      return map[status] || 'badge-gray';
    }

    function getCampaignTypeBadge(type) {
      const map = { 'í˜‘ì°¬': 'badge-gray', 'ìˆí¼ ì œì‘': 'badge-orange', 'ì œíœ´': 'badge-yellow' };
      return map[type] || 'badge-gray';
    }

    function openCampaignModal(item = null) {
      const form = document.getElementById('campaignForm');
      const title = document.getElementById('campaignModalTitle');
      form.reset();

      // ì²´í¬ë°•ìŠ¤ ì´ˆê¸°í™”
      document.querySelectorAll('#campaignProductCheckboxes input').forEach(cb => cb.checked = false);

      if (item) {
        title.textContent = 'ìº í˜ì¸ ìˆ˜ì •';
        form.elements['id'].value = item.id;
        form.elements['ìº í˜ì¸ëª…'].value = item.ìº í˜ì¸ëª… || '';
        form.elements['ìƒíƒœ'].value = item.ìƒíƒœ || '';
        form.elements['ìº í˜ì¸ìœ í˜•'].value = item.ìº í˜ì¸ìœ í˜• || '';
        form.elements['ì¹´í…Œê³ ë¦¬'].value = item.ì¹´í…Œê³ ë¦¬ || '';
        form.elements['ì‹œì‘ì¼'].value = item.ì‹œì‘ì¼ || '';
        form.elements['ì¢…ë£Œì¼'].value = item.ì¢…ë£Œì¼ || '';
        form.elements['ì˜ˆì‚°'].value = item.ì˜ˆì‚° || '';
        form.elements['ëª©í‘œì¸ì›'].value = item.ëª©í‘œì¸ì› || '';
        form.elements['ë¦¬ë°‹'].value = item.ë¦¬ë°‹ || '';
        form.elements['ë§¨ì…˜ID'].value = item.ë§¨ì…˜ID || '';
        form.elements['ë¸Œëœë“œê³„ì •'].value = item.ë¸Œëœë“œê³„ì • || '';
        form.elements['ì œíœ´ë§í¬'].value = item.ì œíœ´ë§í¬ || '';
        form.elements['ë©”ëª¨'].value = item.ë©”ëª¨ || '';

        // í˜‘ì°¬ì œí’ˆ ì²´í¬
        (item.í˜‘ì°¬ì œí’ˆ || []).forEach(product => {
          const cb = document.querySelector(`#campaignProductCheckboxes input[value="${product}"]`);
          if (cb) cb.checked = true;
        });
      } else {
        title.textContent = 'ìº í˜ì¸ ì¶”ê°€';
        form.elements['id'].value = '';
      }

      document.getElementById('campaignModal').classList.add('active');
    }

    function editCampaign(item) { openCampaignModal(item); }

    document.getElementById('campaignForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      const formData = new FormData(e.target);
      const data = {};

      formData.forEach((value, key) => {
        if (key === 'í˜‘ì°¬ì œí’ˆ') {
          if (!data[key]) data[key] = [];
          data[key].push(value);
        } else {
          data[key] = value;
        }
      });

      const id = data.id;
      delete data.id;

      try {
        const url = id ? `${API}/campaigns/${id}` : `${API}/campaigns`;
        const method = id ? 'PUT' : 'POST';

        const res = await fetch(url, {
          method,
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify(data)
        });

        if (res.ok) {
          closeModal('campaignModal');
          loadCampaigns();
        } else {
          const err = await res.json();
          alert('ì˜¤ë¥˜: ' + err.error);
        }
      } catch (err) {
        alert('ì €ì¥ ì‹¤íŒ¨: ' + err.message);
      }
    });

    async function deleteCampaign(id) {
      if (!confirm('ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?')) return;
      try {
        await fetch(`${API}/campaigns/${id}`, { method: 'DELETE' });
        loadCampaigns();
      } catch (err) {
        alert('ì‚­ì œ ì‹¤íŒ¨: ' + err.message);
      }
    }

    // ===================== ìº í˜ì¸ ìƒì„¸ =====================
    let currentCampaignId = null;
    let dailyCharts = {};

    async function openCampaignDetail(id) {
      currentCampaignId = id;

      // í˜ì´ì§€ ì „í™˜
      document.querySelectorAll('.nav-item').forEach(i => i.classList.remove('active'));
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('campaignDetail').classList.add('active');

      await loadCampaignDetail(id);
    }

    function backToCampaigns() {
      currentCampaignId = null;

      // ì°¨íŠ¸ ì •ë¦¬
      Object.values(dailyCharts).forEach(chart => chart.destroy());
      dailyCharts = {};

      // ìº í˜ì¸ ëª©ë¡ìœ¼ë¡œ ëŒì•„ê°€ê¸°
      document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
      document.getElementById('campaigns').classList.add('active');
      document.querySelectorAll('.nav-item').forEach(i => {
        i.classList.remove('active');
        if (i.dataset.page === 'campaigns') i.classList.add('active');
      });
    }

    function refreshCampaignDetail() {
      if (currentCampaignId) loadCampaignDetail(currentCampaignId);
    }

    async function loadCampaignDetail(id) {
      const headerInfo = document.getElementById('campaignHeaderInfo');
      const manageInfo = document.getElementById('campaignManageInfo');
      const performanceStats = document.getElementById('campaignPerformanceStats');
      const dailyChartsContainer = document.getElementById('dailyInsightCharts');

      // ê¸°ì¡´ ë¸Œëœë“œ ì •ë³´ ì„¹ì…˜ ì œê±°
      const existingBrandSection = document.querySelector('.brand-info-section');
      if (existingBrandSection) existingBrandSection.remove();

      headerInfo.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';
      manageInfo.innerHTML = '';
      performanceStats.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';
      dailyChartsContainer.innerHTML = '<div class="loading">ë¡œë”© ì¤‘...</div>';

      try {
        const res = await fetch(`${API}/campaigns/${id}`);
        const data = await res.json();
        const campaign = data.campaign;
        const dailyData = data.dailyData;

        // í˜ì´ì§€ ì œëª© ì—…ë°ì´íŠ¸
        document.getElementById('campaignDetailTitle').textContent = campaign.ìº í˜ì¸ëª… || 'ìº í˜ì¸ ìƒì„¸';

        // í—¤ë” ì •ë³´
        headerInfo.innerHTML = `
          <div class="campaign-title">${campaign.ìº í˜ì¸ëª… || '-'}</div>
          <div class="campaign-meta">
            <div class="meta-item">
              <span class="meta-label">ìº í˜ì¸ ìœ í˜•</span>
              <span class="meta-value">${campaign.ìº í˜ì¸ìœ í˜• || '-'}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">ì¹´í…Œê³ ë¦¬</span>
              <span class="meta-value">${campaign.ì¹´í…Œê³ ë¦¬ || '-'}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">ìƒíƒœ</span>
              <span class="meta-value">${campaign.ìƒíƒœ || '-'}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">ê¸°ê°„</span>
              <span class="meta-value">${campaign.ì‹œì‘ì¼ || '?'} ~ ${campaign.ì¢…ë£Œì¼ || '?'}</span>
            </div>
            <div class="meta-item">
              <span class="meta-label">ì˜ˆì‚°</span>
              <span class="meta-value">${formatCurrency(campaign.ì˜ˆì‚°)}</span>
            </div>
          </div>
        `;

        // ê´€ë¦¬ ì •ë³´
        manageInfo.innerHTML = `
          <div class="info-card">
            <h4>ë‹´ë‹¹ì</h4>
            <div class="value">${campaign.ë‹´ë‹¹ì?.join(', ') || '-'}</div>
          </div>
          <div class="info-card">
            <h4>ìƒíƒœ</h4>
            <div class="value"><span class="badge ${getCampaignStatusBadge(campaign.ìƒíƒœ)}">${campaign.ìƒíƒœ || '-'}</span></div>
          </div>
          <div class="info-card">
            <h4>ë¦¬ë°‹</h4>
            <div class="value highlight">${campaign.ë¦¬ë°‹ || 0}ëª…</div>
          </div>
          <div class="info-card">
            <h4>ì°¸ì—¬ ì¸ì›</h4>
            <div class="value">${campaign.ì°¸ì—¬ì¸ì› || 0}ëª…</div>
          </div>
        `;

        // ë¸Œëœë“œ ì •ë³´ ì„¹ì…˜ ì¶”ê°€
        const brandSection = document.createElement('div');
        brandSection.className = 'brand-info-section';
        brandSection.innerHTML = `
          <h4>ğŸ¢ ë¸Œëœë“œ ì •ë³´</h4>
          <div class="brand-info-grid">
            <div class="brand-info-item">
              <span class="label">ë§¨ì…˜ ID</span>
              <span class="value">${campaign.ë§¨ì…˜ID || '-'}</span>
            </div>
            <div class="brand-info-item">
              <span class="label">ì¹´í…Œê³ ë¦¬</span>
              <span class="value">${campaign.ì¹´í…Œê³ ë¦¬ || '-'}</span>
            </div>
            <div class="brand-info-item">
              <span class="label">í˜‘ì°¬ ì œí’ˆ</span>
              <span class="value">${campaign.í˜‘ì°¬ì œí’ˆ?.join(', ') || '-'}</span>
            </div>
            <div class="brand-info-item">
              <span class="label">ì°¸ì—¬ ì¸ì›</span>
              <span class="value">${campaign.ì°¸ì—¬ì¸ì› || 0}ëª…</span>
            </div>
          </div>
          ${campaign.ë©”ëª¨ ? `<div style="margin-top: 16px; padding: 12px; background: white; border-radius: 8px;"><strong>ë©”ëª¨:</strong> ${campaign.ë©”ëª¨}</div>` : ''}
        `;
        manageInfo.insertAdjacentElement('afterend', brandSection);

        // ì„±ê³¼ í†µê³„
        performanceStats.innerHTML = `
          <div class="stat-card">
            <div class="stat-icon green">â¤ï¸</div>
            <div class="stat-info">
              <h4>ì´ ì¢‹ì•„ìš” ìˆ˜</h4>
              <div class="value number">${formatNumber(campaign.ì´ì¢‹ì•„ìš”ìˆ˜ || 0)}</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon blue">ğŸ’¬</div>
            <div class="stat-info">
              <h4>ì´ ëŒ“ê¸€ ìˆ˜</h4>
              <div class="value number">${formatNumber(campaign.ì´ëŒ“ê¸€ìˆ˜ || 0)}</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon purple">ğŸ“Š</div>
            <div class="stat-info">
              <h4>ì´ ë„ë‹¬ ìˆ˜</h4>
              <div class="value number">${formatNumber(campaign.ì´ë„ë‹¬ìˆ˜ || 0)}</div>
            </div>
          </div>
          <div class="stat-card">
            <div class="stat-icon orange">ğŸ‘ï¸</div>
            <div class="stat-info">
              <h4>ì´ ë…¸ì¶œ ìˆ˜</h4>
              <div class="value number">${formatNumber(campaign.ì´ë…¸ì¶œìˆ˜ || 0)}</div>
            </div>
          </div>
        `;

        // í¬ë¦¬ì—ì´í„° ë¦¬ìŠ¤íŠ¸
        const creators = data.creators || [];
        renderCreatorsTable(creators);

        // ì¼ë³„ ì¸ì‚¬ì´íŠ¸ ì°¨íŠ¸
        renderDailyCharts(dailyData);

      } catch (err) {
        headerInfo.innerHTML = `<div class="empty-state"><h4>ë¡œë“œ ì‹¤íŒ¨</h4><p>${err.message}</p></div>`;
        performanceStats.innerHTML = '';
        dailyChartsContainer.innerHTML = '';
      }
    }

    function renderCreatorsTable(creators) {
      const container = document.getElementById('creatorsTable');
      const countBadge = document.getElementById('creatorCount');

      countBadge.textContent = `${creators.length}ëª…`;

      if (!creators || creators.length === 0) {
        container.innerHTML = '<div class="empty-state">ì°¸ì—¬ í¬ë¦¬ì—ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
        return;
      }

      container.innerHTML = `
        <table>
          <thead>
            <tr>
              <th>í¬ë¦¬ì—ì´í„°</th>
              <th>ì¸ìŠ¤íƒ€ê·¸ë¨</th>
              <th>í¬ìŠ¤íŒ…</th>
              <th>ì¢‹ì•„ìš”</th>
              <th>ëŒ“ê¸€</th>
              <th>ê³µìœ </th>
              <th>ë¹„ë””ì˜¤ì¬ìƒ</th>
              <th>ë„ë‹¬</th>
              <th>ìµœê·¼ê²Œì‹œì¼</th>
            </tr>
          </thead>
          <tbody>
            ${creators.map(c => `
              <tr>
                <td><strong>${c.ì´ë¦„}</strong></td>
                <td>
                  ${c.ì½˜í…ì¸ ëª©ë¡ && c.ì½˜í…ì¸ ëª©ë¡[0]?.postUrl
                    ? `<a href="${c.ì½˜í…ì¸ ëª©ë¡[0].postUrl}" target="_blank" style="color: #667eea;">${c.ì¸ìŠ¤íƒ€ê·¸ë¨}</a>`
                    : `<span style="color: #667eea;">${c.ì¸ìŠ¤íƒ€ê·¸ë¨}</span>`
                  }
                </td>
                <td class="number">${c.ì½˜í…ì¸ .í¬ìŠ¤íŒ…ìˆ˜}</td>
                <td class="number">${formatNumber(c.ì½˜í…ì¸ .ì¢‹ì•„ìš”)}</td>
                <td class="number">${formatNumber(c.ì½˜í…ì¸ .ëŒ“ê¸€)}</td>
                <td class="number">${formatNumber(c.ì½˜í…ì¸ .ê³µìœ  || 0)}</td>
                <td class="number">${formatNumber(c.ì½˜í…ì¸ .ë¹„ë””ì˜¤ì¬ìƒ || 0)}</td>
                <td class="number">${formatNumber(c.ì½˜í…ì¸ .ë„ë‹¬)}</td>
                <td>${c.ìµœê·¼ê²Œì‹œì¼ ? c.ìµœê·¼ê²Œì‹œì¼.split('T')[0] : (c.ë“±ë¡ì¼ || '-')}</td>
              </tr>
            `).join('')}
          </tbody>
        </table>
      `;
    }

    function getCreatorStatusBadge(status) {
      const map = {
        'ì½˜í…ì¸  ì—…ë¡œë“œ ì™„ë£Œ': 'badge-green',
        'ì´¬ì˜ ì§„í–‰ ì¤‘': 'badge-yellow',
        'ì œí’ˆ ìˆ˜ë ¹ ì™„ë£Œ': 'badge-blue',
        'ê³„ì•½ ì™„ë£Œ': 'badge-default'
      };
      return map[status] || 'badge-gray';
    }

    function renderDailyCharts(dailyData) {
      const container = document.getElementById('dailyInsightCharts');

      // ê¸°ì¡´ ì°¨íŠ¸ ì •ë¦¬
      Object.values(dailyCharts).forEach(chart => chart.destroy());
      dailyCharts = {};

      if (!dailyData || dailyData.length === 0) {
        container.innerHTML = '<div class="empty-state">ì¼ë³„ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤</div>';
        return;
      }

      const labels = dailyData.map(d => d.date);

      const chartConfigs = [
        { key: 'likes', label: 'ì¢‹ì•„ìš”', color: '#fa709a', icon: 'â¤ï¸' },
        { key: 'comments', label: 'ëŒ“ê¸€ ìˆ˜', color: '#fee140', icon: 'ğŸ’¬' },
        { key: 'shares', label: 'ê³µìœ  ìˆ˜', color: '#a8edea', icon: 'ğŸ”„' },
        { key: 'mentions', label: 'ë§¨ì…˜ í”¼ë“œ ìˆ˜', color: '#667eea', icon: 'ğŸ“¢' },
        { key: 'videoPlays', label: 'ë¹„ë””ì˜¤ ì¬ìƒ ìˆ˜', color: '#4facfe', icon: 'â–¶ï¸' },
        { key: 'reach', label: 'ë„ë‹¬', color: '#43e97b', icon: 'ğŸ“Š' },
        { key: 'impressions', label: 'ë…¸ì¶œ', color: '#764ba2', icon: 'ğŸ‘ï¸' }
      ];

      container.innerHTML = chartConfigs.map((cfg, idx) => `
        <div class="chart-container">
          <h5>${cfg.icon} ${cfg.label}</h5>
          <canvas id="dailyChart_${idx}"></canvas>
        </div>
      `).join('');

      chartConfigs.forEach((cfg, idx) => {
        const ctx = document.getElementById(`dailyChart_${idx}`);
        const data = dailyData.map(d => d[cfg.key] || 0);

        dailyCharts[cfg.key] = new Chart(ctx, {
          type: 'line',
          data: {
            labels: labels,
            datasets: [{
              label: cfg.label,
              data: data,
              borderColor: cfg.color,
              backgroundColor: cfg.color + '20',
              fill: true,
              tension: 0.4,
              pointRadius: 3,
              pointHoverRadius: 6
            }]
          },
          options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
              legend: { display: false },
              tooltip: {
                mode: 'index',
                intersect: false
              }
            },
            scales: {
              x: {
                grid: { display: false },
                ticks: { font: { size: 10 } }
              },
              y: {
                beginAtZero: true,
                grid: { color: '#f0f0f0' },
                ticks: {
                  font: { size: 10 },
                  callback: function(value) {
                    return formatNumber(value);
                  }
                }
              }
            },
            interaction: {
              mode: 'nearest',
              axis: 'x',
              intersect: false
            }
          }
        });
      });
    }

    // ===================== ìœ í‹¸ë¦¬í‹° =====================
    function closeModal(id) {
      document.getElementById(id).classList.remove('active');
    }

    // ì´ˆê¸° ë¡œë“œ
    loadOptions().then(() => {
      loadDashboard();
    });
  </script>
</body>
</html>
